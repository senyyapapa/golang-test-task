# Go Microservice Template

Этот шаблон предоставляет чистую и модульную архитектуру для создания микросервисов на Go, следуя принципам Clean Architecture. Шаблон включает структурированную конфигурацию, логирование и расширяемую архитектуру для быстрой разработки масштабируемых сервисов.

## Особенности

- **Clean Architecture**: Организован в слои (domain, handlers, repository и т.д.) для поддерживаемости и тестируемости
- **Структурированное логирование**: Интегрирован с логгером `tint`, поддерживающим разные среды (local, dev, prod)
- **Управление конфигурацией**: YAML-конфигурация с переопределением переменными окружения с помощью `cleanenv`
- **Поддержка сред**: Встроенная поддержка локальной, разработочной и производственной сред
- **Готов к Docker**: Включает Dockerfile и .dockerignore для контейнеризации
- **Поддержка миграций**: Структура каталогов для миграций базы данных
- **Фреймворк тестирования**: Выделенный каталог для unit и integration тестов

## Структура проекта

```
.
├── api/                    # Определения API (OpenAPI, protobuf и т.д.)
├── cmd/                    # Точки входа приложения
│   └── app_name/          # Основное приложение
│       └── main.go        # Точка входа приложения
├── configs/               # Файлы конфигурации
│   └── config_template.yaml # Шаблон конфигурации
├── docs/                  # Документация
├── internal/              # Приватный код приложения
│   ├── app/              # Слой приложения
│   ├── config/           # Управление конфигурацией
│   ├── domain/           # Доменные сущности и бизнес-логика
│   ├── entity/           # Сущности данных
│   ├── handlers/         # HTTP/gRPC обработчики
│   ├── repository/       # Слой доступа к данным
│   ├── server/           # Настройка сервера и middleware
│   └── storage/          # Реализации хранилищ
├── migrations/           # Миграции базы данных
├── test/                 # Тестовые файлы и утилиты
├── .dockerignore         # Файл игнорирования Docker
├── .gitignore           # Файл игнорирования Git
├── Dockerfile           # Файл сборки Docker
├── go.mod               # Файл модуля Go
├── go.sum               # Контрольная сумма зависимостей Go
└── README.MD            # Этот файл
```



## Предварительные требования

- Go 1.25.4 или новее
- Docker (опционально, для контейнеризованного развертывания)

## Установка

1. Клонируйте этот репозиторий:
```bash
git clone <repository-url>
cd go-service-template
```
2. Удалите директорию .git
```bash
rm -rf .git
```

3.  Поменяйте модуль с `template` на `ваш сервис`

## Конфигурация

Приложение использует YAML файлы конфигурации с переопределением переменными окружения. Файлы конфигурации находятся в каталоге `configs/`.

### Структура конфигурации

```yaml
env: local  # Среда: local, dev, prod
logger:
  level: debug  # Уровень логирования: debug, info, warn, error
  show_path_call: false  # Показывать путь к файлу и номер строки в логах
# Добавьте здесь специфичную для вашего сервиса конфигурацию
```

### Переменные окружения

Вы можете переопределить значения конфигурации во время запуска приложения:

```bash
go run cmd/app_name/main.go -config path/to/config
```



## Тестирование

Запустите тесты:

```bash
go test ./...
```

Запустите тесты с покрытием:

```bash
go test -cover ./...
```
